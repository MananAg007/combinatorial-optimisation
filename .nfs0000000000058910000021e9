# First create a conda environment with Python 3.7
source ~/.bashrc
conda create -n difusco python=3.7 -y

# Activate the environment
conda activate difusco

# Install basic conda packages
conda install -y mkl=2020.2 mkl-service=2.3.0 mkl_fft=1.3.0 mkl_random=1.1.1 ninja=1.10.2 -c defaults

# Install PyTorch packages with CUDA 11.3
pip install torch==1.11.0+cu113 torchvision==0.12.0+cu113 torchaudio==0.11.0+cu113 --extra-index-url https://download.pytorch.org/whl/cu113

# Install PyTorch Geometric and its dependencies
pip install --no-cache-dir pyg-lib==0.1.0 torch-scatter==2.0.9 torch-cluster==1.6.0 torch-sparse==0.6.15 torch-spline-conv==1.2.1 torch-geometric==2.2.0 -f https://data.pyg.org/whl/torch-1.11.0+cu113.html

# Install first batch of pip packages
pip install --no-cache-dir pytorch-lightning==1.7.7 wandb==0.13.9 tensorboard==2.11.2 matplotlib==3.5.3 numpy>=1.21.0 scipy==1.7.3 scikit-learn==1.0.2

# Install second batch of pip packages
pip install --no-cache-dir absl-py==1.4.0 aiohttp==3.8.3 aiosignal==1.3.1 appdirs==1.4.4 async-timeout==4.0.2 asynctest==0.13.0 attrs==22.2.0 beautifulsoup4==4.11.1

# Install third batch of pip packages
pip install --no-cache-dir cachetools==5.2.1 charset-normalizer==2.1.1 click==8.1.3 cycler==0.11.0 cython==0.29.33 deprecated==1.2.13 docker-pycreds==0.4.0 filelock==3.9.0

# Install fourth batch of pip packages
pip install --no-cache-dir fonttools==4.38.0 frozenlist==1.3.3 fsspec==2022.11.0 gdown==4.6.0 gitdb==4.0.10 gitpython==3.1.30 google-auth==2.16.0 google-auth-oauthlib==0.4.6

# Install fifth batch of pip packages
pip install --no-cache-dir grpcio==1.51.1 idna==3.4 imageio==2.24.0 importlib-metadata==6.0.0 jinja2==3.1.2 joblib==1.2.0 kiwisolver==1.4.4 lightning-utilities==0.5.0

# Install sixth batch of pip packages
pip install --no-cache-dir lkh==1.1.1 logzero==1.7.0 markdown==3.4.1 markupsafe==2.1.1 multidict==6.0.4 networkx==2.6.3 oauthlib==3.2.2 opencv-python==4.7.0.68

# Install seventh batch of pip packages
pip install --no-cache-dir packaging==23.0 pathtools==0.1.2 pickle5==0.0.12 pillow==9.4.0 protobuf==3.20.1 psutil==5.9.4 pyasn1==0.4.8 pyasn1-modules==0.2.8

# Install eighth batch of pip packages
pip install --no-cache-dir pydeprecate==0.3.2 pyparsing==3.0.9 pyrss2gen==1.1 pysocks==1.7.1 python-dateutil==2.8.2 python-sat==0.1.7.dev25 pyyaml==6.0 requests==2.28.2

# Install ninth batch of pip packages
pip install --no-cache-dir requests-oauthlib==1.3.1 rsa==4.9 sentry-sdk==1.13.0 setproctitle==1.3.2 smmap==5.0.0 soupsieve==2.3.2.post1 tabulate==0.8.10 tensorboard-data-server==0.6.1

# Install final batch of pip packages
pip install --no-cache-dir tensorboard-plugin-wit==1.8.1 tensorboardx==2.5.1 threadpoolctl==3.1.0 torchmetrics==0.11.0 tqdm==4.64.1 tsplib95==0.7.1 urllib3==1.26.14 werkzeug==2.2.2 wrapt==1.14.1 yarl==1.8.2 zipp==3.11.0